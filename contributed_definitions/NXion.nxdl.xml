<?xml version="1.0" ?>
<?xml-stylesheet type="text/xsl" href="nxdlformat.xsl"?>
<definition xmlns="http://definition.nexusformat.org/nxdl/3.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://definition.nexusformat.org/nxdl/3.1 ../nxdl.xsd" extends="NXobject" type="group" category="base" name="NXion">
    <doc>
         Set of atoms of a molecular ion or fragment in ToF mass spectrometry.
    </doc>
    <symbols>
        <doc>
             The symbols used in the schema to specify e.g. dimensions of arrays.
        </doc>
        <symbol name="Nivecmax">
            <doc>
                 Maximum number of allowed atoms per (molecular) ion (fragment).
            </doc>
        </symbol>
        <symbol name="Nranges">
            <doc>
                 Number of mass-to-charge-state-ratio range intervals for ion type.
            </doc>
        </symbol>
    </symbols>
    <field name="ion_type" type="NX_UINT" units="NX_UNITLESS">
        <doc>
             Ion type (ion species) identifier. The identifier zero is reserved for
             the special unknown ion type.
        </doc>
    </field>
    <field name="isotope_vector" type="NX_UINT" units="NX_UNITLESS">
        <doc>
             A vector of isotope hash values. These values have to be stored in a
             decreasingly sorted array. The array is filled with zero hash values
             indicating unused places. The individual hash values are built with
             the following hash function: Hashvalue = Z + N*256 with Z the number
             of protons and N the number of neutrons of the isotope respectively. Z
             and N have to be 8-bit unsigned integers.
        </doc>
        <dimensions rank="1">
            <dim index="1" value="Nivecmax"/>
        </dimensions>
    </field>
    <field name="charge_state" type="NX_INT" units="NX_DIMENSIONLESS">
        <doc>
             Signed charge state of the ion in multiples of the elementary electron
             charge. Only positive values will be measured in atom probe microscopy
             as the ions are accelerated by a negatively signed bias electric
             field. In the case that the charge state is not explicitly
             recoverable, the value should be set to zero. This is for example the
             case when using classical range file formats like RNG, RRNG for atom
             probe data. These file formats do not document the charge state
             explicitly but report an integer with the atom type which can be used
             to compute the charge state via the theoretically-known mass-to-
             charge-state-ratios of the elements.
        </doc>
    </field>
    <field name="name" type="NX_CHAR">
        <doc>
             Human-readable ion type name (e.g. Al +++), i.e. ASCII UTF-8 character
             array, ideally using LaTeX notation to specify the ion and charge
             state. Examples are 12C+ or Al+++. Although this name may be human-
             readable and intuitive, parsing such names becomes impractical for
             more complicated cases. Therefore, the isotope_vector should be the
             preferred machine-readable format in use.
        </doc>
    </field>
    <field name="mass_to_charge_range" type="NX_FLOAT" units="NX_ANY">
        <doc>
             Associated lower (mqmin) and upper (mqmax) bounds of mass-to-charge-
             state ratio interval(s) [mqmin, mqmax] (boundaries included) for which
             the respective ion is labelled as an ion of the here referred to
             ion_type.
        </doc>
        <dimensions rank="2">
            <dim index="1" value="2"/>
            <dim index="2" value="Nranges"/>
        </dimensions>
    </field>
</definition>
