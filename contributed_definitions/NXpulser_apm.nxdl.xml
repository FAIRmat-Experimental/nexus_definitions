<?xml version="1.0" ?>
<?xml-stylesheet type="text/xsl" href="nxdlformat.xsl"?>
<definition xmlns="http://definition.nexusformat.org/nxdl/3.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://definition.nexusformat.org/nxdl/3.1 ../nxdl.xsd" extends="NXobject" type="group" category="base" name="NXpulser_apm">
    <doc>
         Laser-, voltage-, or combined- pulsing to trigger field evaporation.
    </doc>
    <symbols>
        <doc>
             The symbols used in the schema to specify e.g. dimensions of arrays.
        </doc>
        <symbol name="Nions">
            <doc>
                 Total number of ions collected.
            </doc>
        </symbol>
    </symbols>
    <field name="pulse_mode" type="NX_CHAR">
        <doc>
             How evaporation is physically triggered.
        </doc>
        <enumeration>
            <item value="laser"/>
            <item value="high_voltage"/>
            <item value="laser_and_high_voltage"/>
        </enumeration>
    </field>
    <group name="laser_pulser" type="NXsource">
        <doc>
             Atom probe microscopes use controlled laser, voltage, or a combination
             of pulsing strategies to trigger the excitation and eventual field
             evaporation/emission of an ion in an atom probe microscopy experiment.
             # Many microscopes have a laser installed which enables measurements
             also with poorly conductive specimens.
        </doc>
        <field name="name" type="NX_CHAR">
            <doc>
                 Given name.
            </doc>
        </field>
        <field name="model" type="NX_CHAR">
            <doc>
                 Given brand or model name by the manufacturer.
            </doc>
        </field>
        <field name="serial_number" type="NX_CHAR">
            <doc>
                 Given hardware name/serial number or hash identifier issued by the
                 manufacturer.
            </doc>
        </field>
        <field name="manufacturer_name" type="NX_CHAR">
            <doc>
                 Given name of the manufacturer.
            </doc>
        </field>
        <field name="wavelength" type="NX_FLOAT" units="NX_WAVELENGTH">
            <doc>
                 Nominal wavelength of the laser radiation.
            </doc>
        </field>
        <field name="power" type="NX_FLOAT" units="NX_POWER">
            <doc>
                 Average power of the laser source while illuminating the specimen.
            </doc>
        </field>
        <field name="pulse_energy" type="NX_FLOAT" units="NX_ENERGY">
            <doc>
                 Average (??) energy of the laser at peak of (each) ?? pulse.
            </doc>
        </field>
        <group type="NXtransformations">
            <doc>
                 Set of transformations which describe the geometry between how the
                 laser focusing optics/pinhole-attached coordinate system is defined,
                 how it has to be transformed so that it aligns with the specimen
                 coordinate system. A right-handed Cartesian coordinate system, the so-
                 called laser space, should be assumed, whose positive z-axis points
                 into the direction of the propagating laser beam.
            </doc>
        </group>
    </group>
    <group name="laser_beam" type="NXbeam">
        <doc>
             Details about specific positions along the focused laser beam which
             illuminates the atom probe specimen.
        </doc>
        <group name="pinhole_position" type="NXcollection">
            <doc>
                 Track time-dependent settings over the course of the measurement where
                 the laser beam exits the focusing optics.
            </doc>
        </group>
        <group name="spot_position" type="NXcollection">
            <doc>
                 Track time-dependent settings over the course of the measurement where
                 the laser hits the specimen.
            </doc>
        </group>
    </group>
    <field name="pulse_frequency" type="NX_NUMBER" units="NX_FREQUENCY">
        <doc>
             Frequency with which the high voltage or laser pulser fires.
        </doc>
    </field>
    <field name="pulse_fraction" type="NX_NUMBER" units="NX_UNITLESS">
        <doc>
             Fraction of the pulse_voltage that is applied in addition to the
             standing_voltage at peak voltage of a pulse.
        </doc>
    </field>
    <field name="pulsed_voltage" type="NX_FLOAT" units="NX_VOLTAGE">
        <doc>
             NEED TO DISCUSS WITH APM COLLEAGUES IN MORE DETAIL WHAT THIS IS
             SPECIFICALLY!
        </doc>
        <dimensions rank="1">
            <dim index="1" value="Nions"/>
        </dimensions>
    </field>
    <field name="standing_voltage" type="NX_FLOAT" units="NX_VOLTAGE">
        <doc>
             Direct current voltage between the specimen and the (local electrode)
             in the case of a LEAP instrument.
        </doc>
        <dimensions rank="1">
            <dim index="1" value="Nions"/>
        </dimensions>
    </field>
</definition>
