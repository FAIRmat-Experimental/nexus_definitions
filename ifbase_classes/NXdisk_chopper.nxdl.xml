<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="nxdlformat.xsl" ?>
<!--
# NeXus - Neutron and X-ray Common Data Format
# 
# Copyright (C) 2008-2012 NeXus International Advisory Committee (NIAC)
# 
# This library is free software; you can redistribute it and/or
# modify it under the terms of the GNU Lesser General Public
# License as published by the Free Software Foundation; either
# version 3 of the License, or (at your option) any later version.
#
# This library is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# Lesser General Public License for more details.
#
# You should have received a copy of the GNU Lesser General Public
# License along with this library; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
#
# For further information, see http://www.nexusformat.org

########### SVN repository information ###################
# $Date: 2013-11-21 11:18:19 +0100 (Thu, 21 Nov 2013) $
# $Author: Mark Koennecke $
# $Revision: 1248 $
# $HeadURL: https://svn.nexusformat.org/definitions/branches/interfaces/base_classes/NXdisk_chopper.nxdl.xml $
# $Id: NXdisk_chopper.nxdl.xml 1248 2013-11-21 10:18:19Z Mark Koennecke $
########### SVN repository information ###################
-->
<definition xmlns="http://definition.nexusformat.org/nxdl/@NXDL_RELEASE@" category="base"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://definition.nexusformat.org/nxdl/@NXDL_RELEASE@ ../nxdl.xsd"
	name="NXdisk_chopper" 
	version="1.0"
    svnid="$Id: NXdisk_chopper.nxdl.xml 1248 2013-11-21 10:18:19Z Mark Koennecke $"
	type="group" extends="NXobject">
	
	<doc>
		A disk chopper is a speedily rotating disk made from an aborbing material  placed into the beam. 
		The rotation is around the beam direction. Its purpose is to cut the incoming beam into bunches. 
		To this purpose the disk contains slits through which particles can pass when illuminated by the 
		beam. 
		
		Disk choppers are mostly used in time-of flight neutron scattering. 
		
		At a constant flux neutron source like a reactor it cuts the incoming beam into bunches. 
		Then the time the neutron needs to travel between the chopper and detector is recorded 
		and used to determine the spead/wavelength of the neutron. This bunch generating chopper is 
		often called the master chopper. At a pulsed neutron source, a master chopper is not necessary 
		as the source already defines the pulse. 
		
		More complex chopper systems are used to further refine the raw neutron bunch by preventing frame overlap.
		by cutting the bunch up even further etc. These choppers are often called pulse shaping choppers.
		
		Consider a bunch of neutrons travelling from the master chopper to a pulse shaping chopper further 
		down the beamline. The time the bunch needs to travel to the pulse shaping chopper is not 
		neglibile. Thus if the pulse shaping chopper would open in sync with the master chopper, the bunch would 
		be absorbed. In order to prevent this, the pulse shaping chopper opens at an angular offset in relation 
		to the master chopper. This angular offset is the chopper phase.   
	</doc>
	
	<attribute name="implements" type="NX_CHAR">
		<doc>
			NXattenuator can implement: NXIFbeamline_component
		</doc>
	</attribute>

	<field name="type">
		<doc>Type of the disk-chopper: only one from the enumerated list (match text exactly)</doc>
		<enumeration>
			<item value="Chopper type single" />
			<item value="contra_rotating_pair" />
			<item value="synchro_pair" />
		</enumeration>
	</field>
	<field name="rotation_speed" type="NX_FLOAT" units="NX_FREQUENCY">
		<doc>chopper rotation speed</doc>
	</field>
	<field name="slits" type="NX_INT">
		<doc>Number of slits</doc>
	</field>
	<field name="slit_angle" type="NX_FLOAT" units="NX_ANGLE">
		<doc>angular opening</doc>
	</field>
	<field name="pair_separation" type="NX_FLOAT" units="NX_LENGTH">
		<doc>disc spacing in direction of beam</doc>
	</field>
	<field name="radius" type="NX_FLOAT" units="NX_LENGTH">
		<doc>radius to centre of slit</doc>
	</field>
	<field name="slit_height" type="NX_FLOAT" units="NX_LENGTH">
		<doc>total slit height</doc>
	</field>
	<field name="phase" type="NX_FLOAT" units="NX_ANGLE">
		<doc>chopper phase angle</doc>
	</field>
	<field name="ratio" type="NX_INT">
		<doc>
		  pulse reduction factor of this chopper in relation to other choppers/fastest pulse in
		  the instrument
		</doc>
	</field>
	<field name="wavelength_range" type="NX_FLOAT" units="NX_WAVELENGTH">
		<doc>low and high values of wavelength range transmitted</doc>
		<dimensions><dim index="1" value="2"/></dimensions>
	</field>
</definition>
