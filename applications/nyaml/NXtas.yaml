category: application
doc: |   
  This is an application definition for a triple axis spectrometer.
  
  It is for the trademark scan of the TAS, the Q-E scan.
  For your alignment scans use the rules in ':'ref':'`NXscan`.

symbols: 
  doc: |     
    The symbol(s) listed here will be used below to coordinate datasets with the same shape.

  nP: | 
    Number of points

type: group
NXtas(NXobject):
  (NXentry)entry:
    title(NX_CHAR):
    start_time(NX_DATE_TIME):
    definition:
      doc: | 
        Official NeXus NXDL schema to which this file conforms
      enumeration: [NXtas]
    (NXinstrument):
      (NXsource):
        name:
        probe:
          enumeration: [neutron, x-ray]
      (NXcrystal)monochromator:
        ei(NX_FLOAT):
          unit: NX_ENERGY
          axis: 1
          dimensions:
            rank: 1
            dim: [[1, nP]]
        rotation_angle(NX_FLOAT):
          unit: NX_ANGLE
          dimensions:
            rank: 1
            dim: [[1, nP]]
      (NXcrystal)analyser:
        ef(NX_FLOAT):
          unit: NX_ENERGY
          axis: 1
          dimensions:
            rank: 1
            dim: [[1, nP]]
        rotation_angle(NX_FLOAT):
          unit: NX_ANGLE
          dimensions:
            rank: 1
            dim: [[1, nP]]
        polar_angle(NX_FLOAT):
          unit: NX_ANGLE
          dimensions:
            rank: 1
            dim: [[1, nP]]
      (NXdetector):
        data(NX_INT):
          signal: 1
          dimensions:
            rank: 1
            dim: [[1, nP]]
        polar_angle(NX_FLOAT):
          unit: NX_ANGLE
          dimensions:
            rank: 1
            dim: [[1, nP]]
    (NXsample):
      name:
        doc: | 
          Descriptive name of sample
      qh(NX_FLOAT):
        unit: NX_DIMENSIONLESS
        axis: 1
        dimensions:
          rank: 1
          dim: [[1, nP]]
      qk(NX_FLOAT):
        unit: NX_DIMENSIONLESS
        axis: 1
        dimensions:
          rank: 1
          dim: [[1, nP]]
      ql(NX_FLOAT):
        unit: NX_DIMENSIONLESS
        axis: 1
        dimensions:
          rank: 1
          dim: [[1, nP]]
      en(NX_FLOAT):
        unit: NX_ENERGY
        axis: 1
        dimensions:
          rank: 1
          dim: [[1, nP]]
      rotation_angle(NX_FLOAT):
        unit: NX_ANGLE
        dimensions:
          rank: 1
          dim: [[1, nP]]
      polar_angle(NX_FLOAT):
        unit: NX_ANGLE
        dimensions:
          rank: 1
          dim: [[1, nP]]
      sgu(NX_FLOAT):
        unit: NX_ANGLE
        dimensions:
          rank: 1
          dim: [[1, nP]]
      sgl(NX_FLOAT):
        unit: NX_ANGLE
        dimensions:
          rank: 1
          dim: [[1, nP]]
      unit_cell(NX_FLOAT):
        unit: NX_LENGTH
        dimensions:
          rank: 1
          dim: [[1, 6]]
      orientation_matrix(NX_FLOAT):
        unit: NX_DIMENSIONLESS
        dimensions:
          rank: 1
          dim: [[1, 9]]
    (NXmonitor):
      mode:
        doc: |           
          Count to a preset value based on either clock time (timer)
          or received monitor counts (monitor).
        enumeration: [monitor, timer]
      preset(NX_FLOAT):
        doc: | 
          preset value for time or monitor
      data(NX_FLOAT):
        unit: NX_ANY
        doc: | 
          Total integral monitor counts
        dimensions:
          rank: 1
          dim: [[1, nP]]
    (NXdata):
      doc: | 
        One of the ei,ef,qh,qk,ql,en should get a primary=1 attribute to denote the main scan axis
      ei(link):
        target: /NXentry/NXinstrument/monochromator:NXcrystal/ei
      ef(link):
        target: /NXentry/NXinstrument/analyser:NXcrystal/ef
      en(link):
        target: /NXentry/NXsample/en
      qh(link):
        target: /NXentry/NXsample/qh
      qk(link):
        target: /NXentry/NXsample/qk
      ql(link):
        target: /NXentry/NXsample/ql
      data(link):
        target: /NXentry/NXinstrument/NXdetector/data
