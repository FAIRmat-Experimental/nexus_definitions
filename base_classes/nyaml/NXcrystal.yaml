category: base
doc: |   
  A crystal monochromator or analyzer.
  
  Permits double bent
  monochromator comprised of multiple segments with anisotropic
  Gaussian mosaic.
  
  If curvatures are set to zero or are absent, array
  is considered to be flat.
  
  Scattering vector is perpendicular to surface. Crystal is oriented
  parallel to beam incident on crystal before rotation, and lies in
  vertical plane.

symbols: 
  doc: | 
    These symbols will be used below to coordinate dimensions with the same lengths.

  n_comp: | 
    number of different unit cells to be described

  i: | 
    number of wavelengths

type: group
NXcrystal(NXobject):
  (NXgeometry):
    deprecated: Use the field `depends_on` and ':'ref':'`NXtransformations` to position the crystal and NXoff_geometry to describe its shape instead
    doc: | 
      Position of crystal
  usage(NX_CHAR):
    doc: | 
      How this crystal is used.  Choices are in the list.
    enumeration: 
      Bragg: 
        doc: | 
          reflection geometry
      Laue: 
        doc: |           
          The chemical formula specified using CIF conventions.
          Abbreviated version of CIF standard':'
          * Only recognized element symbols may be used.
          * Each element symbol is followed by a 'count' number. A count of '1' may be omitted.
          * A space or parenthesis must separate each cluster of (element symbol + count).
          * Where a group of elements is enclosed in parentheses, the multiplier for the
            group must follow the closing parentheses. That is, all element and group
            multipliers are assumed to be printed as subscripted numbers.
          * Unless the elements are ordered in a manner that corresponds to their chemical
            structure, the order of the elements within any group or moiety depends on
            whether or not carbon is present.
          * If carbon is present, the order should be':'
            C, then H, then the other elements in alphabetical order of their symbol.
            If carbon is not present, the elements are listed purely in alphabetic
            order of their symbol.
          This is the *Hill* system used by Chemical Abstracts.
          See, for example':'
          http':'//www.iucr.org/__data/iucr/cif/standard/cifstd15.html or
          http':'//www.cas.org/training/stneasytips/subinforformula1.html.
  type:
    doc: |       
      Type or material of monochromating substance.
      Chemical formula can be specified separately.
      Use the "reflection" field to indicate the (hkl) orientation.
      Use the "d_spacing" field to record the lattice plane spacing.
      
      This field was changed (2010-11-17) from an enumeration to
      a string since common usage showed a wider variety of use
      than a simple list.  These are the items in the list at
      the time of the change':' PG (Highly Oriented Pyrolytic Graphite) |
      Ge | Si | Cu | Fe3Si | CoFe | Cu2MnAl (Heusler) | Multilayer |
      Diamond.
  chemical_formula:
    doc: |       
      The chemical formula specified using CIF conventions.
      Abbreviated version of CIF standard':'
      
      * Only recognized element symbols may be used.
      * Each element symbol is followed by a 'count' number. A count of '1' may be omitted.
      * A space or parenthesis must separate each cluster of (element symbol + count).
      * Where a group of elements is enclosed in parentheses, the multiplier for the
        group must follow the closing parentheses. That is, all element and group
        multipliers are assumed to be printed as subscripted numbers.
      * Unless the elements are ordered in a manner that corresponds to their chemical
        structure, the order of the elements within any group or moiety depends on
        whether or not carbon is present.
      * If carbon is present, the order should be':'
        C, then H, then the other elements in alphabetical order of their symbol.
        If carbon is not present, the elements are listed purely in alphabetic
        order of their symbol.
      * This is the *Hill* system used by Chemical Abstracts.
  order_no(NX_INT):
    doc: |       
      A number which describes if this is the first, second,..
      ':'math':'`n^{th}` crystal in a multi crystal monochromator
  cut_angle(NX_FLOAT):
    unit: NX_ANGLE
    doc: | 
      Cut angle of reflecting Bragg plane and plane of crystal surface
  space_group:
    doc: | 
      Space group of crystal structure
  unit_cell(NX_FLOAT):
    unit: NX_LENGTH
    doc: | 
      Unit cell parameters (lengths and angles)
    dimensions:
      rank: 2
      dim: [[1, n_comp], [2, 6]]
  unit_cell_a(NX_FLOAT):
    unit: NX_LENGTH
    doc: | 
      Unit cell lattice parameter':' length of side a
  unit_cell_b(NX_FLOAT):
    unit: NX_LENGTH
    doc: | 
      Unit cell lattice parameter':' length of side b
  unit_cell_c(NX_FLOAT):
    unit: NX_LENGTH
    doc: | 
      Unit cell lattice parameter':' length of side c
  unit_cell_alpha(NX_FLOAT):
    unit: NX_ANGLE
    doc: | 
      Unit cell lattice parameter':' angle alpha
  unit_cell_beta(NX_FLOAT):
    unit: NX_ANGLE
    doc: | 
      Unit cell lattice parameter':' angle beta
  unit_cell_gamma(NX_FLOAT):
    unit: NX_ANGLE
    doc: | 
      Unit cell lattice parameter':' angle gamma
  unit_cell_volume(NX_FLOAT):
    unit: NX_VOLUME
    doc: | 
      Volume of the unit cell
  orientation_matrix(NX_FLOAT):
    doc: |       
      Orientation matrix of single crystal sample using Busing-Levy convention':'
      W. R. Busing and H. A. Levy (1967). Acta Cryst. 22, 457-464
    dimensions:
      rank: 2
      dim: [[1, 3], [2, 3]]
  wavelength(NX_FLOAT):
    unit: NX_WAVELENGTH
    doc: | 
      Optimum diffracted wavelength
    dimensions:
      dim: [[1, i]]
  d_spacing(NX_FLOAT):
    unit: NX_LENGTH
    doc: | 
      spacing between crystal planes of the reflection
  scattering_vector(NX_FLOAT):
    unit: NX_WAVENUMBER
    doc: | 
      Scattering vector, Q, of nominal reflection
  reflection(NX_INT):
    unit: NX_UNITLESS
    doc: | 
      Miller indices (hkl) values of nominal reflection
    dimensions:
      dim: [[1, 3]]
  thickness(NX_FLOAT):
    unit: NX_LENGTH
    doc: | 
      Thickness of the crystal.  (Required for Laue orientations - see "usage" field)
  density(NX_NUMBER):
    unit: NX_MASS_DENSITY
    doc: | 
      mass density of the crystal
  segment_width(NX_FLOAT):
    unit: NX_LENGTH
    doc: | 
      Horizontal width of individual segment
  segment_height(NX_FLOAT):
    unit: NX_LENGTH
    doc: | 
      Vertical height of individual segment
  segment_thickness(NX_FLOAT):
    unit: NX_LENGTH
    doc: | 
      Thickness of individual segment
  segment_gap(NX_FLOAT):
    unit: NX_LENGTH
    doc: | 
      Typical gap between adjacent segments
  segment_columns(NX_FLOAT):
    unit: NX_LENGTH
    doc: | 
      number of segment columns in horizontal direction
  segment_rows(NX_FLOAT):
    unit: NX_LENGTH
    doc: | 
      number of segment rows in vertical direction
  mosaic_horizontal(NX_FLOAT):
    unit: NX_ANGLE
    doc: | 
      horizontal mosaic Full Width Half Maximum
  mosaic_vertical(NX_FLOAT):
    unit: NX_ANGLE
    doc: | 
      vertical mosaic Full Width Half Maximum
  curvature_horizontal(NX_FLOAT):
    unit: NX_ANGLE
    doc: | 
      Horizontal curvature of focusing crystal
  curvature_vertical(NX_FLOAT):
    unit: NX_ANGLE
    doc: | 
      Vertical curvature of focusing crystal
  is_cylindrical(NX_BOOLEAN):
    doc: | 
      Is this crystal bent cylindrically?
  cylindrical_orientation_angle(NX_NUMBER):
    unit: NX_ANGLE
    doc: | 
      If cylindrical':' cylinder orientation angle
  polar_angle(NX_FLOAT):
    unit: NX_ANGLE
    doc: |       
      Polar (scattering) angle at which crystal assembly is positioned.
      Note':' some instrument geometries call this term 2theta.
      Note':' it is recommended to use NXtransformations instead.
    dimensions:
      dim: [[1, i]]
  azimuthal_angle(NX_FLOAT):
    unit: NX_ANGLE
    doc: |       
      Azimuthal angle at which crystal assembly is positioned.
      Note':' it is recommended to use NXtransformations instead.
    dimensions:
      dim: [[1, i]]
  bragg_angle(NX_FLOAT):
    unit: NX_ANGLE
    doc: | 
      Bragg angle of nominal reflection
    dimensions:
      dim: [[1, i]]
  temperature(NX_FLOAT):
    unit: NX_TEMPERATURE
    doc: | 
      average/nominal crystal temperature
  temperature_coefficient(NX_FLOAT):
    unit: NX_ANY
    doc: | 
      how lattice parameter changes with temperature
  (NXlog)temperature_log:
    doc: | 
      log file of crystal temperature
  (NXdata)reflectivity:
    doc: | 
      crystal reflectivity versus wavelength
  (NXdata)transmission:
    doc: | 
      crystal transmission versus wavelength
  (NXshape)shape:
    deprecated: Use NXoff_geometry instead to describe the shape of the monochromator
    doc: | 
      A NXshape group describing the shape of the crystal arrangement
  (NXoff_geometry):
    exists: ['min', '0']
    doc: |       
      This group describes the shape of the beam line component
  \@default:
    doc: |       
      .. index':'':' plotting
      
      Declares which child group contains a path leading
      to a ':'ref':'`NXdata` group.
      
      It is recommended (as of NIAC2014) to use this attribute
      to help define the path to the default dataset to be plotted.
      See https':'//www.nexusformat.org/2014_How_to_find_default_data.html
      for a summary of the discussion.
  depends_on(NX_CHAR):
    doc: |       
      NeXus positions components by applying a set of translations and rotations
      to apply to the component starting from 0, 0, 0. The order of these operations
      is critical and forms what NeXus calls a dependency chain. The depends_on
      field defines the path to the top most operation of the dependency chain or the
      string "." if located in the origin. Usually these operations are stored in a
      NXtransformations group. But NeXus allows them to be stored anywhere.
      
      .. todo':'':'
        Add a definition for the reference point of a crystal.
  (NXtransformations):
    doc: |       
      Transformations used by this component to define its position and orientation.
